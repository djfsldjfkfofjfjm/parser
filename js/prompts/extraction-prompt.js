/**
 * Промпт для извлечения информации со страниц сайта через Gemini API
 * 
 * Этот промпт используется для обработки контента отдельных страниц и 
 * извлечения из них структурированной информации о продуктах, услугах, ценах и т.д.
 */

/**
 * Параметры промпта извлечения информации
 * @type {Object}
 */
export const extractionPromptConfig = {
  // Маркеры для выделения важности в промпте
  emphasisMarkers: {
    start: 'ВСЮ',
    middle: 'ВСЕХ',
    end: 'ПОЛНУЮ и ТОЧНУЮ'
  },
  
  // Настройки категорий информации
  categories: {
    includeProducts: true,
    includeCharacteristics: true,
    includeCompanyInfo: true,
    includePromotions: true,
    includePrices: true
  },
  
  // Настройки исключений
  exclusions: {
    excludeGeneralPhrases: true,
    excludeIrrelevantContent: true
  }
};

/**
 * Конструирует и возвращает промпт для извлечения информации на основе конфигурации
 * @param {Object} config - Параметры конфигурации промпта (опционально)
 * @returns {string} - Готовый текст промпта
 */
export function buildExtractionPrompt(config = extractionPromptConfig) {
  const { emphasisMarkers, categories, exclusions } = config;
  
  // Возвращаем готовый промпт
  return `ВАЖНО: АБСОЛЮТНО НИКАКИХ СОКРАЩЕНИЙ, ОБОБЩЕНИЙ ИЛИ ПРОПУСКОВ ИНФОРМАЦИИ!

Твоя задача: 
1. Извлечь ИСЧЕРПЫВАЮЩУЮ информацию о компании и её продуктах из предоставленного текста.
2. Сохранить ВСЕ детали без каких-либо изменений или упрощений.

Извлекаемая информация ДОЛЖНА включать:
- ПОЛНОЕ описание КАЖДОГО продукта (без исключений)
- ВСЕ технические характеристики каждого продукта (цвет, размер, материал, состав, мощность и т.д.)
- ТОЧНЫЕ цены с указанием валюты и акционных предложений
- ДОСЛОВНО записанные условия скидок, акций, программ лояльности
- ВСЕ контактные данные: телефоны, адреса, email, мессенджеры, графики работы
- ТОЧНЫЕ ссылки на страницы продуктов и категорий
- ПОЛНЫЕ условия доставки, оплаты, возврата и гарантии
- ВСЕ упоминания о социальных сетях и онлайн-каналах

ЗАПРЕЩЕНО: 
- Создавать обобщения вместо точных формулировок
- Использовать фразы "и другие", "и т.д.", "и прочее"
- Отбрасывать информацию о любом продукте
- Сокращать списки характеристик или функций
- Округлять цены или диапазоны параметров

Этот текст будет использован для создания базы знаний для ИИ-бота продаж, который должен иметь ВСЕ детали для точного консультирования клиентов.`;
}

/**
 * Экспортируем готовый промпт с настройками по умолчанию
 */
export const extractionPrompt = buildExtractionPrompt();

export default extractionPrompt; 